{
    "problemName": "word-squares",
    "language": "java",
    "code": "class Solution {\n    List<List<String>> res = new ArrayList<>();\n    \n    public List<List<String>> wordSquares(String[] words) {\n        Map<String, Set<String>> prefix = new HashMap<>();\n        for(int i=0; i<words.length; i++) {\n            String word = words[i];\n            for(int j=0;j<word.length()-1; j++) {\n                String pre = word.substring(0, j+1);\n                if(!prefix.containsKey(pre)){\n                    prefix.put(pre, new HashSet<>());\n                }\n                prefix.get(pre).add(word);\n            }\n        }\n        for(String w: words){\n            List<String> temp = new ArrayList<>();\n            temp.add(w);\n            helper(words, temp, prefix);\n            temp.remove(temp.size()-1);\n        }\n        return res;\n        \n    }\n    \n    public void helper(String[] words, List<String> temp, Map<String, Set<String>> prefix) {\n        if(words[0].length() == temp.size()){\n            res.add(new ArrayList<String>(temp));\n            return;\n        }\n        \n        StringBuilder sb = new StringBuilder();\n        for(int i=0; i<temp.size(); i++) {\n            sb.append(temp.get(i).charAt(temp.size()));\n        }\n        String pre = sb.toString();\n        if(!prefix.containsKey(pre)) {\n            return;\n        }\n        for(String s: prefix.get(pre)){\n            temp.add(s);\n            helper(words, temp, prefix);\n            temp.remove(temp.size()-1);\n        }\n        \n    }\n}"
}